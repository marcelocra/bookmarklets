javascript:(function(){if(!window.location.hostname.includes('calendar.google.com')){alert('This bookmarklet only works on Google Calendar');return;}function findShell(){let s=document.querySelector('.dOqRGf');if(!s)s=document.querySelector('.Kk7lMc-ae3xF.Kk7lMc-Ia7Qfc-CZjX4e');if(!s){const els=document.querySelectorAll('div');for(let el of els){if(el.offsetWidth===300&&el.offsetHeight>100){s=el;break;}}}return s;}const shell=findShell();if(!shell){alert('Companion shell not found. Make sure it is open');return;}const existing=document.getElementById('companion-resize-handle');if(existing)existing.remove();const handle=document.createElement('div');handle.id='companion-resize-handle';handle.style.cssText='position:absolute;left:-2px;top:0;width:4px;height:100%;background:transparent;cursor:ew-resize;z-index:10000;user-select:none;';if(getComputedStyle(shell).position==='static')shell.style.position='relative';shell.appendChild(handle);let isResizing=false,startX=0,startWidth=0,resizeTimeout;function updateWidth(w){if(resizeTimeout)clearTimeout(resizeTimeout);resizeTimeout=setTimeout(()=>document.documentElement.style.setProperty('--companion-shell-width',w+'px'),16);}handle.addEventListener('mousedown',function(e){isResizing=true;startX=e.clientX;startWidth=shell.offsetWidth;document.body.style.userSelect='none';document.body.style.cursor='ew-resize';e.preventDefault();e.stopPropagation();});document.addEventListener('mousemove',function(e){if(!isResizing)return;const deltaX=startX-e.clientX;const newWidth=Math.max(250,Math.min(800,startWidth+deltaX));updateWidth(newWidth);e.preventDefault();});document.addEventListener('mouseup',function(e){if(isResizing){isResizing=false;document.body.style.userSelect='';document.body.style.cursor='';if(resizeTimeout){clearTimeout(resizeTimeout);resizeTimeout=null;}}});handle.addEventListener('mouseenter',function(){this.style.background='rgba(66,133,244,0.4)';});handle.addEventListener('mouseleave',function(){if(!isResizing)this.style.background='transparent';});})();
